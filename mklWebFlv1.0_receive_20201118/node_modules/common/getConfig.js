module.exports = function () {
    var path = require('path');
    var fs = require('fs');
    var domainName = path.basename(_baseDirname);
    var currDirName = __dirname;

    var configPath = path.resolve(currDirName, './pweb_nodeAppConfigList');
    var _index = 0;
    while (!fs.existsSync(configPath)) {
        ++_index;
        if (_index == 10) break;
        configPath = path.resolve(configPath, '../../pweb_nodeAppConfigList');
    }

    var publicConfigPath = path.join(configPath, '_public_config');
    var selfcConfigPath = path.join(configPath, domainName + '_config');

    var config_outer = fs.existsSync(selfcConfigPath + '.js') ? require(selfcConfigPath) : {};
    var config_public = fs.existsSync(publicConfigPath + '.js') ? require(publicConfigPath) : {};

    extend(config_public, config_outer, true);//取并集,优先使用自身配置
    return config_public;

    function extend(o, n, override) {
        for (var p in n) {
            if (n.hasOwnProperty(p) && (!o.hasOwnProperty(p) || override)) {
                o[p] = n[p];
            }
        }
    };
};